name: Smoke test
permissions:
  contents: read
on:
  workflow_dispatch:
  pull_request_review:
    types: [submitted]

jobs:
  test_docker_deployment:
    if: ${{ github.event.review.state == 'approved' || github.event_name == 'workflow_dispatch' }}
    uses: taranis-ai/github-actions/.github/workflows/smoke-test.yml@master
    with:
      tag: ${{ github.ref_name }}
      repo_name: ${{ github.event.repository.name }}