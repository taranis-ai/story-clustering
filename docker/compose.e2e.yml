services:
  story_clustering:
    image: "${DOCKER_IMAGE_NAMESPACE:-ghcr.io/taranis-ai}/taranis-${REPO_NAME}:${TAG:-e2e_test}"
    healthcheck:
      test: ["CMD-SHELL", "python -c \"import requests; requests.get('http://localhost:8000/health', timeout=5).raise_for_status()\""]
      interval: 1m30s
      timeout: 30s
      retries: 5
      start_period: 30s
    environment:
      API_KEY: "${API_KEY:-testkey}"
      DEBUG: "${DEBUG:-False}"
